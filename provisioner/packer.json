{
  "variables": {},
  "builders": [
    {
      "type": "arm",
      "file_urls": [
        "http://cdimage.ubuntu.com/releases/20.04.1/release/ubuntu-20.04.1-preinstalled-server-arm64+raspi.img.xz"
      ],
      "file_checksum_url": "http://cdimage.ubuntu.com/releases/20.04.1/release/SHA256SUMS",
      "file_checksum_type": "sha256",
      "file_target_extension": "xz",
      "file_unarchive_cmd": ["xz", "--decompress", "$ARCHIVE_PATH"],
      "image_build_method": "reuse",
      "image_path": "ubuntu-20.04.img",
      "image_size": "3.1G",
      "image_type": "dos",
      "image_partitions": [
        {
          "name": "boot",
          "type": "c",
          "start_sector": "2048",
          "filesystem": "fat",
          "size": "256M",
          "mountpoint": "/boot/firmware"
        },
        {
          "name": "root",
          "type": "83",
          "start_sector": "526336",
          "filesystem": "ext4",
          "size": "2.8G",
          "mountpoint": "/"
        }
      ],
      "image_chroot_env": [
        "PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin"
      ],
      "qemu_binary_source_path": "/usr/bin/qemu-aarch64-static",
      "qemu_binary_destination_path": "/usr/bin/qemu-aarch64-static"
    }
  ],
  "provisioners": [
    {
      "type": "file",
      "source": "./cloud-init/user-data.cfg",
      "destination": "/etc/cloud/cloud.cfg.d/100_provisioner_local.cfg"
    },
    {
      "type": "breakpoint",
      "disable": false,
      "note": "this is a breakpoint"
    },
    {
      "type": "file",
      "direction": "download",
      "source": "/boot/vmlinuz",
      "destination": "./kernel"
    },
    {
      "type": "file",
      "direction": "download",
      "sources": [
        "/boot/firmware/bcm2710-rpi-2-b.dtb",
        "/boot/firmware/bcm2710-rpi-3-b-plus.dtb",
        "/boot/firmware/bcm2710-rpi-3-b.dtb",
        "/boot/firmware/bcm2710-rpi-cm3.dtb",
        "/boot/firmware/bcm2711-rpi-4-b.dtb",
        "/boot/firmware/bcm2837-rpi-3-a-plus.dtb",
        "/boot/firmware/bcm2837-rpi-3-b-plus.dtb",
        "/boot/firmware/bcm2837-rpi-3-b.dtb",
        "/boot/firmware/bcm2837-rpi-cm3-io3.dtb"
      ],
      "destination": "./firmware/"
    }
  ],
  "post-processors": []
}
